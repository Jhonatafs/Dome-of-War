<!DOCTYPE html>
<html>
<head>
<title>Grupos de Atletas</title>
</head>
<body>
  <h1>Grupos de Atletas</h1>
  <div id="grupos"></div>

  <script>
fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vQGkceBQyWRfzzlCOB4fdC9AtI5qKCT8CJFMlX81t8GuUObzE0KAA3aZvfGPdkL9i_uTpmHE-Nuqd84/pub?gid=396513377&single=true&output=csv')
  .then(response => {
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    return response.text();
  })
  .then(csvData => {
    const atletas = csvData.split('\n').slice(1).map(row => {
      const cols = row.split(",");
      return {
        idade: cols[0]?.trim() || "Não informado",
        peso: cols[1]?.trim() || "Não informado",
        faixa: cols[2]?.trim() || "Não informado",
        sexo: cols[3]?.trim() || "Não informado",
        categoria: cols[4]?.trim() || "Não informado",
        absoluto: cols[5]?.trim() || "Não informado",
        paymentConfirmed: cols[6]?.trim() === "OK" ? "Sim" : "Não",
      };
    }).filter(atleta => atleta.idade !== "Não informado");

    const grupos = {};

    atletas.forEach(atleta => {
      const grupo = `${atleta.sexo}, ${atleta.faixa}, ${atleta.idade}, ${atleta.categoria}`; // Define a chave do grupo
      if (!grupos[grupo]) {
        grupos[grupo] = [];
      }
      grupos[grupo].push(atleta);
    });

    const gruposDiv = document.getElementById('grupos');

    for (const grupo in grupos) {
      const grupoDiv = document.createElement('div');
      grupoDiv.innerHTML = `<h2>#${grupo}</h2>`; // Adiciona # antes do nome do grupo

      const listaAtletas = document.createElement('ul');
      grupos[grupo].forEach(atleta => {
        const itemAtleta = document.createElement('li');
        itemAtleta.textContent = `${atleta.peso} - ${atleta.absoluto} - Pagamento: ${atleta.paymentConfirmed}`;
        listaAtletas.appendChild(itemAtleta);
      });

      grupoDiv.appendChild(listaAtletas);
      gruposDiv.appendChild(grupoDiv);
    }

  })
  .catch(error => {
    console.error('Erro ao carregar dados:', error);
    const gruposDiv = document.getElementById('grupos');
    gruposDiv.innerHTML = "<p>Erro ao carregar os dados. Verifique o console para mais detalhes.</p>";
  });
  </script>
</body>
</html>